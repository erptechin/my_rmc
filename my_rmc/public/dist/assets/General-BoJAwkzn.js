import{a as n,j as e,k as m,J as y,A as b,aE as N,B as c,aG as k}from"./index-B-2MviOj.js";import{G as U}from"./iconBase-DkREoQsq.js";import{u as w,o as _}from"./index.esm-CyM5naMu.js";import{D as u}from"./dynamicForms-DyFj_i__.js";import{s as S}from"./schema-BhjgGDIK.js";import{u as L}from"./useAuthHook-yt-vrRRQ.js";import{a as R}from"./useApiHook-Dq7yRLdf.js";import{F as z}from"./XMarkIcon-ySQ_rjOO.js";import"./ConfirmModal-vqvWv6IY.js";import"./dialog-D3Q2zPdO.js";import"./transition-BhCVM3Dr.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-BoTXc3Ek.js";import"./frozen-CBFywmAK.js";import"./Datepicker-BaeViiZV.js";import"./combobox-C-Q0zbpt.js";import"./index-Eb-vwg-N.js";import"./Page-QykUNudg.js";import"./useUnmount-Bdmsoe8t.js";import"./PlusIcon-CdUk_QgZ.js";import"./useMutation-B9F7p0fh.js";function P(r){return U({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(r)}function h({file:r,src:s,alt:t,...i}){const[a,o]=n.useState(null);return n.useEffect(()=>{if(!r){o(null);return}try{o(URL.createObjectURL(r))}catch(d){console.error(d),o(null)}return()=>{URL.revokeObjectURL(a)}},[r]),e.jsx("img",{src:a||s,onLoad:()=>URL.revokeObjectURL(a),alt:t,...i})}h.propTypes={file:m.object,src:m.string,alt:m.string};const C="User",x=["first_name","email","birth_date"],g=["last_name","mobile_no"];function ee(){const{user:r}=y(),{data:s}=R({doctype:C,fields:JSON.stringify([...x,...g])}),[t,i]=n.useState("/images/200x200.png");n.useEffect(()=>{r!=null&&r.user_image&&i(r==null?void 0:r.user_image)},[r]);const{register:a,handleSubmit:o,reset:d,formState:{errors:f},control:p}=w({resolver:_(S),defaultValues:r}),j=L(),v=l=>{l.user=r==null?void 0:r.id,t&&(l.user_image=t),j.mutate(l)};return e.jsx("form",{className:"mt-2",onSubmit:o(v),autoComplete:"off",children:e.jsxs("div",{className:"w-full max-w-3xl 2xl:max-w-5xl",children:[e.jsx("h5",{className:"text-lg font-medium text-gray-800 dark:text-dark-50",children:"General"}),e.jsx("p",{className:"mt-0.5 text-balance text-sm text-gray-500 dark:text-dark-200",children:"Update your account settings."}),e.jsx("div",{className:"my-5 h-px bg-gray-200 dark:bg-dark-500"}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-1.5",children:[e.jsx("span",{className:"text-base font-medium text-gray-800 dark:text-dark-100",children:"Profile"}),e.jsx(b,{size:20,imgComponent:h,src:`${N}${t}`,classNames:{root:"rounded-xl ring-primary-600 ring-offset-[3px] ring-offset-white transition-all hover:ring-3 dark:ring-primary-500 dark:ring-offset-dark-700",display:"rounded-xl"},indicator:e.jsx("div",{className:"absolute bottom-0 right-0 -m-1 flex items-center justify-center rounded-full bg-white dark:bg-dark-700",children:t?e.jsx(c,{onClick:()=>i(null),isIcon:!0,className:"size-6 rounded-full",children:e.jsx(z,{className:"size-4"})}):e.jsx(k,{name:"avatar",onChange:i,accept:"image/*",children:({...l})=>e.jsx(c,{isIcon:!0,className:"size-6 rounded-full",...l,children:e.jsx(P,{className:"size-3.5"})})})})})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2 [&_.prefix]:pointer-events-none",children:[e.jsx("div",{className:"space-y-4",children:e.jsx(u,{infos:s==null?void 0:s.fields,fields:x,register:a,control:p,errors:f,tables:{}})}),e.jsx("div",{className:"space-y-4",children:e.jsx(u,{infos:s==null?void 0:s.fields,fields:g,register:a,control:p,errors:f,tables:{}})})]}),e.jsx("div",{className:"mt-8 flex justify-end space-x-3 ",children:e.jsx(c,{className:"min-w-[7rem]",type:"submit",color:"primary",children:"Save"})})]})})}export{ee as default};
