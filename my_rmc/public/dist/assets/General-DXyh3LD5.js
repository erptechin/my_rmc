import{a as n,j as e,l,e as v,A as b,aK as N,B as c,aJ as k}from"./index-CQSnfzOd.js";import{c as U}from"./index-C3f4x6NN.js";import{u as _,o as w}from"./index.esm-pJJ70Kfz.js";import{D as x}from"./SearchSelect-D4EtsxKn.js";import{s as S}from"./schema-CZNCWMmu.js";import{u as R}from"./useAuthHook-BDG8Kfd-.js";import{a as L}from"./useApiHook-Cs2wJ3RW.js";import{F as P}from"./XMarkIcon-D09zHYKC.js";import"./iconBase-CJOE8E9s.js";import"./combobox-BErVCluG.js";import"./transition-C7-MfEfP.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./frozen-DWK2MHln.js";import"./active-element-history-B-Uuw2gA.js";import"./Datepicker-BbVjqDgu.js";import"./popover-DONnzUWT.js";import"./index-C5dWWu73.js";import"./Page-BKi4U6qm.js";import"./useUnmount-ii3bnVk5.js";import"./ConfirmModal-GnmGds5K.js";import"./XMarkIcon-DN4cmKBN.js";import"./useMutation-C20-WXgZ.js";function j({file:s,src:m,alt:r,...a}){const[t,i]=n.useState(null);return n.useEffect(()=>{if(!s){i(null);return}try{i(URL.createObjectURL(s))}catch(d){console.error(d),i(null)}return()=>{URL.revokeObjectURL(t)}},[s]),e.jsx("img",{src:t||m,onLoad:()=>URL.revokeObjectURL(t),alt:r,...a})}j.propTypes={file:l.object,src:l.string,alt:l.string};const z="User",u=["first_name","email","birth_date"],g=["last_name","mobile_no"];function ee(){const{user:s}=v(),{data:m}=L({doctype:z,fields:JSON.stringify([...u,...g])}),[r,a]=n.useState("/images/200x200.png");n.useEffect(()=>{s!=null&&s.user_image&&a(s==null?void 0:s.user_image)},[s]);const{register:t,handleSubmit:i,reset:d,formState:{errors:f},control:p}=_({resolver:w(S),defaultValues:s}),h=R(),y=o=>{o.user=s==null?void 0:s.id,r&&(o.user_image=r),h.mutate(o)};return e.jsx("form",{className:"mt-2",onSubmit:i(y),autoComplete:"off",children:e.jsxs("div",{className:"w-full max-w-3xl 2xl:max-w-5xl",children:[e.jsx("h5",{className:"text-lg font-medium text-gray-800 dark:text-dark-50",children:"General"}),e.jsx("p",{className:"mt-0.5 text-balance text-sm text-gray-500 dark:text-dark-200",children:"Update your account settings."}),e.jsx("div",{className:"my-5 h-px bg-gray-200 dark:bg-dark-500"}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-1.5",children:[e.jsx("span",{className:"text-base font-medium text-gray-800 dark:text-dark-100",children:"Profile"}),e.jsx(b,{size:20,imgComponent:j,src:`${N}${r}`,classNames:{root:"rounded-xl ring-primary-600 ring-offset-[3px] ring-offset-white transition-all hover:ring-3 dark:ring-primary-500 dark:ring-offset-dark-700",display:"rounded-xl"},indicator:e.jsx("div",{className:"absolute bottom-0 right-0 -m-1 flex items-center justify-center rounded-full bg-white dark:bg-dark-700",children:r?e.jsx(c,{onClick:()=>a(null),isIcon:!0,className:"size-6 rounded-full",children:e.jsx(P,{className:"size-4"})}):e.jsx(k,{name:"avatar",onChange:a,accept:"image/*",children:({...o})=>e.jsx(c,{isIcon:!0,className:"size-6 rounded-full",...o,children:e.jsx(U,{className:"size-3.5"})})})})})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2 [&_.prefix]:pointer-events-none",children:[e.jsx("div",{className:"space-y-4",children:e.jsx(x,{infos:m,fields:u,register:t,control:p,errors:f,tables:{}})}),e.jsx("div",{className:"space-y-4",children:e.jsx(x,{infos:m,fields:g,register:t,control:p,errors:f,tables:{}})})]}),e.jsx("div",{className:"mt-8 flex justify-end space-x-3 ",children:e.jsx(c,{className:"min-w-[7rem]",type:"submit",color:"primary",children:"Save"})})]})})}export{ee as default};
