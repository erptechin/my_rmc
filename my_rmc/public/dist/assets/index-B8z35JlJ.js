import{u as D,t as E,a as o,v as h,w as V,j as e,B,h as i,C as A,x as L,y as U,z as S,D as G,E as H,G as O}from"./index-Cy2kVO7l.js";import{u as q,a as J,b as W,C as K,c as Q,F as X,T as Y,f as m,d as Z,e as $,S as ee,g as te,P as se,h as re,i as le,j as ne,k as w,l as ae,m as oe,n as ie,o as de,p as ce}from"./getUserAgentBrowser-CjNUrNTe.js";import{P as ge}from"./Page-D2us71RC.js";import{u as ue,a as me}from"./useApiHook-3gszFeki.js";import"./Datepicker-BJZFO-BV.js";import"./XMarkIcon-CqUuyjow.js";import"./listbox-CqcCx5NK.js";import"./transition-FWX6bv6Q.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./frozen-CbS1-XYE.js";import"./use-text-value-Dl9r3Zit.js";import"./iconBase-DbdcHFOy.js";import"./menu-ClOPG5NK.js";import"./use-tree-walker-5vitoERr.js";import"./index-QCZ-zLx2.js";import"./active-element-history-DxC_kyT-.js";import"./dialog-PAA6jRw1.js";import"./useUnmount-DLa-AUXC.js";import"./useMutation-GKsit-pn.js";const fe=ce()==="Safari",d="Docket",xe=["description","dob","driving_licence_no","full_name","offense_date"];function De(){const{cardSkin:j}=D(),C=E(),[k,f]=q(),[x,g]=o.useState([]),{data:r}=ue({doctype:d,fields:JSON.stringify(xe)}),[u,p]=o.useState({doctype:d,page:1,page_length:10,fields:null}),{data:l}=me(u);o.useEffect(()=>{if(r!=null&&r.fields){const s=r==null?void 0:r.fields.map(t=>t.fieldname);p({...u,fields:JSON.stringify([...s,"name"])})}},[r]),o.useEffect(()=>{l!=null&&l.data&&g(l==null?void 0:l.data)},[l]);const[n,R]=o.useState({enableSorting:!0,enableColumnFilters:!0,enableFullScreen:!1,enableRowDense:!1}),[y,F]=o.useState(""),[N,v]=o.useState([]),[P,I]=h("column-visibility-orders-2",{}),[M,z]=h("column-pinning-orders-2",{}),b=o.useRef(),{width:T}=J({ref:b}),a=W({data:x,columns:K(r==null?void 0:r.fields),doctype:d,state:{globalFilter:y,sorting:N,columnVisibility:P,columnPinning:M,tableSettings:n},meta:{setTableSettings:R,deleteRow:s=>{f(),g(t=>t.filter(c=>c.order_id!==s.original.order_id))},deleteRows:s=>{f();const t=s.map(c=>c.original.order_id);g(c=>c.filter(_=>!t.includes(_.order_id)))}},filterFns:{fuzzy:w},enableSorting:n.enableSorting,enableColumnFilters:n.enableColumnFilters,getCoreRowModel:de(),onGlobalFilterChange:F,getFilteredRowModel:ie(),getFacetedUniqueValues:oe(),getFacetedMinMaxValues:ae(),globalFilterFn:w,onSortingChange:v,getSortedRowModel:ne(),getExpandedRowModel:le(),getRowCanExpand:()=>!0,getPaginationRowModel:re(),onColumnVisibilityChange:I,onColumnPinningChange:z,autoResetPageIndex:k});return V(()=>a.resetRowSelection(),[x]),Q(n.enableFullScreen),e.jsx(ge,{title:d,children:e.jsxs("div",{className:"transition-content grid grid-cols-1 grid-rows-[auto_auto_1fr] px-(--margin-x) py-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-4 ",children:[e.jsx("div",{className:"min-w-0",children:e.jsxs("h2",{className:"truncate text-xl font-medium tracking-wide text-gray-800 dark:text-dark-50",children:[d," Lists"]})}),e.jsxs(B,{className:"h-8 space-x-1.5 rounded-md px-3 text-xs ",color:"primary",onClick:()=>C("add-new"),children:[e.jsx(X,{className:"size-5"}),e.jsxs("span",{children:["New ",d]})]})]}),e.jsxs("div",{className:i("flex flex-col pt-4",n.enableFullScreen&&"fixed inset-0 z-61 h-full w-full bg-white pt-3 dark:bg-dark-900"),children:[e.jsx(Y,{table:a}),e.jsxs(A,{className:i("relative mt-3 flex grow flex-col",n.enableFullScreen&&"overflow-hidden"),ref:b,children:[e.jsx("div",{className:"table-wrapper min-w-full grow overflow-x-auto",children:e.jsxs(L,{hoverable:!0,dense:n.enableRowDense,sticky:n.enableFullScreen,className:"w-full text-left rtl:text-right",children:[e.jsx(U,{children:a.getHeaderGroups().map(s=>e.jsx(S,{children:s.headers.map(t=>e.jsxs(G,{className:i("bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100 first:ltr:rounded-tl-lg last:ltr:rounded-tr-lg first:rtl:rounded-tr-lg last:rtl:rounded-tl-lg",t.column.getCanPin()&&[t.column.getIsPinned()==="left"&&"sticky z-2 ltr:left-0 rtl:right-0",t.column.getIsPinned()==="right"&&"sticky z-2 ltr:right-0 rtl:left-0"]),children:[t.column.getCanSort()?e.jsxs("div",{className:"flex cursor-pointer select-none items-center space-x-3 ",onClick:t.column.getToggleSortingHandler(),children:[e.jsx("span",{className:"flex-1",children:t.isPlaceholder?null:m(t.column.columnDef.header,t.getContext())}),e.jsx(Z,{sorted:t.column.getIsSorted()})]}):t.isPlaceholder?null:m(t.column.columnDef.header,t.getContext()),t.column.getCanFilter()?e.jsx($,{column:t.column}):null]},t.id))},s.id))}),e.jsx(H,{children:a.getRowModel().rows.map(s=>e.jsxs(o.Fragment,{children:[e.jsx(S,{className:i("relative border-y border-transparent border-b-gray-200 dark:border-b-dark-500",s.getIsExpanded()&&"border-dashed",s.getIsSelected()&&!fe&&"row-selected after:pointer-events-none after:absolute after:inset-0 after:z-2 after:h-full after:w-full after:border-3 after:border-transparent after:bg-primary-500/10 ltr:after:border-l-primary-500 rtl:after:border-r-primary-500"),children:s.getVisibleCells().map(t=>e.jsxs(O,{className:i("relative",j==="shadow-sm"?"dark:bg-dark-700":"dark:bg-dark-900",t.column.getCanPin()&&[t.column.getIsPinned()==="left"&&"sticky z-2 ltr:left-0 rtl:right-0",t.column.getIsPinned()==="right"&&"sticky z-2 ltr:right-0 rtl:left-0"]),children:[t.column.getIsPinned()&&e.jsx("div",{className:i("pointer-events-none absolute inset-0 border-gray-200 dark:border-dark-500",t.column.getIsPinned()==="left"?"ltr:border-r rtl:border-l":"ltr:border-l rtl:border-r")}),m(t.column.columnDef.cell,t.getContext())]},t.id))}),s.getIsExpanded()&&e.jsx("tr",{children:e.jsx("td",{colSpan:s.getVisibleCells().length,className:"p-0",children:e.jsx(ee,{row:s,cardWidth:T})})})]},s.id))})]})}),e.jsx(te,{table:a}),a.getCoreRowModel().rows.length>0&&e.jsx("div",{className:i("px-4 pb-4 sm:px-5 sm:pt-4",n.enableFullScreen&&"bg-gray-50 dark:bg-dark-800",!(a.getIsSomeRowsSelected()||a.getIsAllRowsSelected())&&"pt-4"),children:e.jsx(se,{table:a,count:(l==null?void 0:l.counts)??0,search:u,setSearch:p})})]})]})]})})}export{De as default};
