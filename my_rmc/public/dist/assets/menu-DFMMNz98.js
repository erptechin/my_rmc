import{K as w,a as oe,y as Q,o as g,b as se,c as I,d as b,r as ue,$ as ie,e as de,w as ce,_ as W,f as me,L as k,x as fe,R as pe,g as ve,n as Ie,u as be,h as ye,i as N,m as ge,j as Se,k as Ee,p as he,l as xe,q as J,G as X,s as Pe,t as $e,v as Me,A as O,B as Re,C as De,D as Y,E as we,H as ke,I as Te,J as Ce,M as Fe,N as _e,O as Z,P as Ae,Q as z,S as B,T as Oe}from"./transition-Cc3pRxfh.js";import{a as v,a4 as A,R as D}from"./index-f3r6umgb.js";import{s as Ne,a as Qe}from"./use-text-value-CR7fPshE.js";import{F as Ke}from"./Datepicker-Ma-0Q657.js";var Le=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Le||{}),Ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ue||{}),Be=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(Be||{});function G(e,n=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Oe(n(e.items.slice()),u=>u.dataRef.current.domRef.current),a=o?r.indexOf(o):null;return a===-1&&(a=null),{items:r,activeItemIndex:a}}let Ge={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,n)=>{var o,r,a,u,i;if(e.menuState===1)return e;let d={...e,searchQuery:"",activationTrigger:(o=n.trigger)!=null?o:1,__demoMode:!1};if(n.focus===b.Nothing)return{...d,activeItemIndex:null};if(n.focus===b.Specific)return{...d,activeItemIndex:e.items.findIndex(m=>m.id===n.id)};if(n.focus===b.Previous){let m=e.activeItemIndex;if(m!==null){let y=e.items[m].dataRef.current.domRef,t=B(n,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});if(t!==null){let s=e.items[t].dataRef.current.domRef;if(((r=y.current)==null?void 0:r.previousElementSibling)===s.current||((a=s.current)==null?void 0:a.previousElementSibling)===null)return{...d,activeItemIndex:t}}}}else if(n.focus===b.Next){let m=e.activeItemIndex;if(m!==null){let y=e.items[m].dataRef.current.domRef,t=B(n,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});if(t!==null){let s=e.items[t].dataRef.current.domRef;if(((u=y.current)==null?void 0:u.nextElementSibling)===s.current||((i=s.current)==null?void 0:i.nextElementSibling)===null)return{...d,activeItemIndex:t}}}}let c=G(e),f=B(n,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});return{...d,...c,activeItemIndex:f}},3:(e,n)=>{let o=e.searchQuery!==""?0:1,r=e.searchQuery+n.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(i=>{var d;return((d=i.dataRef.current.textValue)==null?void 0:d.startsWith(r))&&!i.dataRef.current.disabled}),u=a?e.items.indexOf(a):-1;return u===-1||u===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:u,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,n)=>{let o=G(e,r=>[...r,{id:n.id,dataRef:n.dataRef}]);return{...e,...o}},6:(e,n)=>{let o=G(e,r=>{let a=r.findIndex(u=>u.id===n.id);return a!==-1&&r.splice(a,1),r});return{...e,...o,activationTrigger:1}},7:(e,n)=>e.buttonElement===n.element?e:{...e,buttonElement:n.element},8:(e,n)=>e.itemsElement===n.element?e:{...e,itemsElement:n.element}},H=v.createContext(null);H.displayName="MenuContext";function K(e){let n=v.useContext(H);if(n===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,K),o}return n}function He(e,n){return Z(n.type,Ge,e,n)}let Ve=v.Fragment;function je(e,n){let{__demoMode:o=!1,...r}=e,a=v.useReducer(He,{__demoMode:o,menuState:o?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:u,itemsElement:i,buttonElement:d},c]=a,f=Q(n);ke(u===0,[d,i],(x,E)=>{c({type:1}),Te(E,Ce.Loose)||(x.preventDefault(),d==null||d.focus())});let m=g(()=>{c({type:1})}),y=v.useMemo(()=>({open:u===0,close:m}),[u,m]),t={ref:f},s=k();return D.createElement(Fe,null,D.createElement(H.Provider,{value:a},D.createElement(_e,{value:Z(u,{0:N.Open,1:N.Closed})},s({ourProps:t,theirProps:r,slot:y,defaultTag:Ve,name:"Menu"}))))}let qe="button";function Je(e,n){var o;let r=v.useId(),{id:a=`headlessui-menu-button-${r}`,disabled:u=!1,autoFocus:i=!1,...d}=e,[c,f]=K("Menu.Button"),m=oe(),y=Q(n,se(),g(p=>f({type:7,element:p}))),t=g(p=>{switch(p.key){case I.Space:case I.Enter:case I.ArrowDown:p.preventDefault(),p.stopPropagation(),A.flushSync(()=>f({type:0})),f({type:2,focus:b.First});break;case I.ArrowUp:p.preventDefault(),p.stopPropagation(),A.flushSync(()=>f({type:0})),f({type:2,focus:b.Last});break}}),s=g(p=>{switch(p.key){case I.Space:p.preventDefault();break}}),x=g(p=>{var F;if(ue(p.currentTarget))return p.preventDefault();u||(c.menuState===0?(A.flushSync(()=>f({type:1})),(F=c.buttonElement)==null||F.focus({preventScroll:!0})):(p.preventDefault(),f({type:0})))}),{isFocusVisible:E,focusProps:P}=ie({autoFocus:i}),{isHovered:$,hoverProps:T}=de({isDisabled:u}),{pressed:M,pressProps:h}=ce({disabled:u}),C=v.useMemo(()=>({open:c.menuState===0,active:M||c.menuState===0,disabled:u,hover:$,focus:E,autofocus:i}),[c,$,E,M,u,i]),R=W(m(),{ref:y,id:a,type:me(e,c.buttonElement),"aria-haspopup":"menu","aria-controls":(o=c.itemsElement)==null?void 0:o.id,"aria-expanded":c.menuState===0,disabled:u||void 0,autoFocus:i,onKeyDown:t,onKeyUp:s,onClick:x},P,T,h);return k()({ourProps:R,theirProps:d,slot:C,defaultTag:qe,name:"Menu.Button"})}let ze="div",We=z.RenderStrategy|z.Static;function Xe(e,n){var o,r;let a=v.useId(),{id:u=`headlessui-menu-items-${a}`,anchor:i,portal:d=!1,modal:c=!0,transition:f=!1,...m}=e,y=fe(i),[t,s]=K("Menu.Items"),[x,E]=pe(y),P=ve(),[$,T]=v.useState(null),M=Q(n,y?x:null,g(l=>s({type:8,element:l})),T),h=Ie(t.itemsElement);y&&(d=!0);let C=be(),[R,p]=ye(f,$,C!==null?(C&N.Open)===N.Open:t.menuState===0);ge(R,t.buttonElement,()=>{s({type:1})});let F=t.__demoMode?!1:c&&t.menuState===0;Se(F,h);let L=t.__demoMode?!1:c&&t.menuState===0;Ee(L,{allowed:v.useCallback(()=>[t.buttonElement,t.itemsElement],[t.buttonElement,t.itemsElement])});let U=t.menuState!==0,S=Ne(U,t.buttonElement)?!1:R;v.useEffect(()=>{let l=t.itemsElement;l&&t.menuState===0&&l!==(h==null?void 0:h.activeElement)&&l.focus({preventScroll:!0})},[t.menuState,t.itemsElement,h]),Ke(t.menuState===0,{container:t.itemsElement,accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let _=he(),ee=g(l=>{var V,j,q;switch(_.dispose(),l.key){case I.Space:if(t.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),s({type:3,value:l.key});case I.Enter:if(l.preventDefault(),l.stopPropagation(),s({type:1}),t.activeItemIndex!==null){let{dataRef:le}=t.items[t.activeItemIndex];(j=(V=le.current)==null?void 0:V.domRef.current)==null||j.click()}X(t.buttonElement);break;case I.ArrowDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Next});case I.ArrowUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Previous});case I.Home:case I.PageUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.First});case I.End:case I.PageDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Last});case I.Escape:l.preventDefault(),l.stopPropagation(),A.flushSync(()=>s({type:1})),(q=t.buttonElement)==null||q.focus({preventScroll:!0});break;case I.Tab:l.preventDefault(),l.stopPropagation(),A.flushSync(()=>s({type:1})),xe(t.buttonElement,l.shiftKey?J.Previous:J.Next);break;default:l.key.length===1&&(s({type:3,value:l.key}),_.setTimeout(()=>s({type:4}),350));break}}),te=g(l=>{switch(l.key){case I.Space:l.preventDefault();break}}),ne=v.useMemo(()=>({open:t.menuState===0}),[t.menuState]),re=W(y?P():{},{"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(r=t.buttonElement)==null?void 0:r.id,id:u,onKeyDown:ee,onKeyUp:te,role:"menu",tabIndex:t.menuState===0?0:void 0,ref:M,style:{...m.style,...E,"--button-width":$e(t.buttonElement,!0).width},...Pe(p)}),ae=k();return D.createElement(Me,{enabled:d?e.static||R:!1},ae({ourProps:re,theirProps:m,slot:ne,defaultTag:ze,features:We,visible:S,name:"Menu.Items"}))}let Ye=v.Fragment;function Ze(e,n){let o=v.useId(),{id:r=`headlessui-menu-item-${o}`,disabled:a=!1,...u}=e,[i,d]=K("Menu.Item"),c=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===r:!1,f=v.useRef(null),m=Q(n,f);O(()=>{if(!i.__demoMode&&i.menuState===0&&c&&i.activationTrigger!==0)return Re().requestAnimationFrame(()=>{var S,_;(_=(S=f.current)==null?void 0:S.scrollIntoView)==null||_.call(S,{block:"nearest"})})},[i.__demoMode,f,c,i.menuState,i.activationTrigger,i.activeItemIndex]);let y=Qe(f),t=v.useRef({disabled:a,domRef:f,get textValue(){return y()}});O(()=>{t.current.disabled=a},[t,a]),O(()=>(d({type:5,id:r,dataRef:t}),()=>d({type:6,id:r})),[t,r]);let s=g(()=>{d({type:1})}),x=g(S=>{if(a)return S.preventDefault();d({type:1}),X(i.buttonElement)}),E=g(()=>{if(a)return d({type:2,focus:b.Nothing});d({type:2,focus:b.Specific,id:r})}),P=De(),$=g(S=>{P.update(S),!a&&(c||d({type:2,focus:b.Specific,id:r,trigger:0}))}),T=g(S=>{P.wasMoved(S)&&(a||c||d({type:2,focus:b.Specific,id:r,trigger:0}))}),M=g(S=>{P.wasMoved(S)&&(a||c&&d({type:2,focus:b.Nothing}))}),[h,C]=Y(),[R,p]=we(),F=v.useMemo(()=>({active:c,focus:c,disabled:a,close:s}),[c,a,s]),L={id:r,ref:m,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":h,"aria-describedby":R,disabled:void 0,onClick:x,onFocus:E,onPointerEnter:$,onMouseEnter:$,onPointerMove:T,onMouseMove:T,onPointerLeave:M,onMouseLeave:M},U=k();return D.createElement(C,null,D.createElement(p,null,U({ourProps:L,theirProps:u,slot:F,defaultTag:Ye,name:"Menu.Item"})))}let et="div";function tt(e,n){let[o,r]=Y(),a=e,u={ref:n,"aria-labelledby":o,role:"group"},i=k();return D.createElement(r,null,i({ourProps:u,theirProps:a,slot:{},defaultTag:et,name:"Menu.Section"}))}let nt="header";function rt(e,n){let o=v.useId(),{id:r=`headlessui-menu-heading-${o}`,...a}=e,u=Ae();O(()=>u.register(r),[r,u.register]);let i={id:r,ref:n,role:"presentation",...u.props};return k()({ourProps:i,theirProps:a,slot:{},defaultTag:nt,name:"Menu.Heading"})}let at="div";function lt(e,n){let o=e,r={ref:n,role:"separator"};return k()({ourProps:r,theirProps:o,slot:{},defaultTag:at,name:"Menu.Separator"})}let ot=w(je),st=w(Je),ut=w(Xe),it=w(Ze),dt=w(tt),ct=w(rt),mt=w(lt),bt=Object.assign(ot,{Button:st,Items:ut,Item:it,Section:dt,Heading:ct,Separator:mt});export{it as E,st as I,ut as g,bt as r};
