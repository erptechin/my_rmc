import{u as E,t as D,H as O,j as e,S as A,B as f,C as g,I as u}from"./index-8wxVIW6A.js";import{u as B,o as H,C as h}from"./index.esm-BDkFH--n.js";import{S as P,D as j}from"./dynamicForms-BfU2WzIy.js";import{P as T}from"./Page-CQhP514V.js";import{u as G,b as J,c as R,d as U}from"./useApiHook-DFA5YuyF.js";import{F as z}from"./DocumentPlusIcon-C2mUdsy0.js";import"./combobox-BeoCQkuC.js";import"./transition-VxyeCPwk.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./frozen-K8rTz8px.js";import"./active-element-history-oXYro80m.js";import"./use-tree-walker-R_zAwgyZ.js";import"./dialog-21Pz5-uQ.js";import"./index-BJGhA3L5.js";import"./iconBase-CRJI3pV1.js";import"./useUnmount-BAdrSObL.js";import"./useMutation-Cbef_1IY.js";const N="Item List",c="Item",l=["item_name","item_group"],n=["stock_uom"],y=["item_code","gst_hsn_code"],L=Object.fromEntries([...l,...n].map(d=>[d,""]));function me(){const{isDark:d,darkColorScheme:S,lightColorScheme:_}=E(),p=D(),{id:i}=O(),{data:t,isFetching:v}=G({doctype:c,fields:JSON.stringify([...l,...n,...y])}),{data:b,isFetching:F}=J({doctype:c,id:i,fields:JSON.stringify([...l,...n,...y])}),C=R(s=>{s&&(x(),p(-1))}),k=U(s=>{s&&(x(),p(-1))}),{register:o,handleSubmit:w,formState:{errors:a},control:m,reset:x}=B({resolver:H(P(t==null?void 0:t.fields)),values:i?b:L}),I=s=>{i?k.mutate({doctype:c,body:{...s,id:i}}):C.mutate({doctype:c,body:s})};return v||F?e.jsx(A,{style:{"--sk-color":d?S[700]:_[300]}}):e.jsx(T,{title:(i?"Edit ":"New ")+N,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[i?"Edit":"New"," ",N]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>p(-1),children:"Back"}),e.jsx(f,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsx("form",{autoComplete:"off",onSubmit:w(I),id:"new-post-form",children:e.jsxs("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:[e.jsx("div",{className:"col-span-12 lg:col-span-8",children:e.jsx(g,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsx(h,{render:({field:{value:s}})=>{var r;return e.jsx(u,{value:s?String(s):"",readOnly:!!i,label:"Item Code",placeholder:"Enter Item Code",...o("item_code"),error:(r=a==null?void 0:a.item_code)==null?void 0:r.message})},control:m,...o("item_code")}),e.jsx(j,{infos:t==null?void 0:t.fields,fields:l,register:o,control:m,errors:a}),e.jsx(h,{render:({field:{value:s}})=>{var r;return e.jsx(u,{value:s?String(s):"38245010",label:"GST HSN",placeholder:"Enter the GST HSN",...o("gst_hsn_code"),error:(r=a==null?void 0:a.gst_hsn_code)==null?void 0:r.message})},control:m,...o("gst_hsn_code")})]})})}),e.jsx("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-4 lg:space-y-6",children:e.jsx(g,{className:"space-y-5 p-4 sm:px-5",children:e.jsx(j,{infos:t==null?void 0:t.fields,fields:n,register:o,control:m,errors:a})})})]})})]})})}export{me as default};
