import{a as l,j as e,l as m,e as y,A as b,aI as N,B as c,aH as k}from"./index-C0PndZKY.js";import{G as U}from"./iconBase-BMGqdKmN.js";import{u as w,o as _}from"./index.esm-pR4xPpZC.js";import{D as u}from"./dynamicForms-CFatU2e4.js";import{s as S}from"./schema-CiJHPZxE.js";import{u as L}from"./useAuthHook-DTZjqad_.js";import{a as R}from"./useApiHook-DER5-gzB.js";import{F as z}from"./XMarkIcon-DRmGi1Kv.js";import"./ConfirmModal-BpsPbTsB.js";import"./dialog-CGSyerY6.js";import"./transition-BwmRkQvd.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-BfpJv4N7.js";import"./frozen-_XzV-JRQ.js";import"./Datepicker-CUdDMFvG.js";import"./combobox-D0klP23K.js";import"./index-DXu32JUD.js";import"./Page-BOI-KKBp.js";import"./useUnmount-CdJTDvuZ.js";import"./PlusIcon-LJB4fq3x.js";import"./useMutation-BT79zLqI.js";function I(r){return U({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(r)}function h({file:r,src:n,alt:t,...a}){const[s,i]=l.useState(null);return l.useEffect(()=>{if(!r){i(null);return}try{i(URL.createObjectURL(r))}catch(d){console.error(d),i(null)}return()=>{URL.revokeObjectURL(s)}},[r]),e.jsx("img",{src:s||n,onLoad:()=>URL.revokeObjectURL(s),alt:t,...a})}h.propTypes={file:m.object,src:m.string,alt:m.string};const P="User",x=["first_name","email","birth_date"],g=["last_name","mobile_no"];function ee(){const{user:r}=y(),{data:n}=R({doctype:P,fields:JSON.stringify([...x,...g])}),[t,a]=l.useState("/images/200x200.png");l.useEffect(()=>{r!=null&&r.user_image&&a(r==null?void 0:r.user_image)},[r]);const{register:s,handleSubmit:i,reset:d,formState:{errors:f},control:p}=w({resolver:_(S),defaultValues:r}),j=L(),v=o=>{o.user=r==null?void 0:r.id,t&&(o.user_image=t),j.mutate(o)};return e.jsx("form",{className:"mt-2",onSubmit:i(v),autoComplete:"off",children:e.jsxs("div",{className:"w-full max-w-3xl 2xl:max-w-5xl",children:[e.jsx("h5",{className:"text-lg font-medium text-gray-800 dark:text-dark-50",children:"General"}),e.jsx("p",{className:"mt-0.5 text-balance text-sm text-gray-500 dark:text-dark-200",children:"Update your account settings."}),e.jsx("div",{className:"my-5 h-px bg-gray-200 dark:bg-dark-500"}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-1.5",children:[e.jsx("span",{className:"text-base font-medium text-gray-800 dark:text-dark-100",children:"Profile"}),e.jsx(b,{size:20,imgComponent:h,src:`${N}${t}`,classNames:{root:"rounded-xl ring-primary-600 ring-offset-[3px] ring-offset-white transition-all hover:ring-3 dark:ring-primary-500 dark:ring-offset-dark-700",display:"rounded-xl"},indicator:e.jsx("div",{className:"absolute bottom-0 right-0 -m-1 flex items-center justify-center rounded-full bg-white dark:bg-dark-700",children:t?e.jsx(c,{onClick:()=>a(null),isIcon:!0,className:"size-6 rounded-full",children:e.jsx(z,{className:"size-4"})}):e.jsx(k,{name:"avatar",onChange:a,accept:"image/*",children:({...o})=>e.jsx(c,{isIcon:!0,className:"size-6 rounded-full",...o,children:e.jsx(I,{className:"size-3.5"})})})})})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2 [&_.prefix]:pointer-events-none",children:[e.jsx("div",{className:"space-y-4",children:e.jsx(u,{infos:n,fields:x,register:s,control:p,errors:f,tables:{}})}),e.jsx("div",{className:"space-y-4",children:e.jsx(u,{infos:n,fields:g,register:s,control:p,errors:f,tables:{}})})]}),e.jsx("div",{className:"mt-8 flex justify-end space-x-3 ",children:e.jsx(c,{className:"min-w-[7rem]",type:"submit",color:"primary",children:"Save"})})]})})}export{ee as default};
